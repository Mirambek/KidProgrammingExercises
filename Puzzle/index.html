<html>
<header>
  <script src="../libraries/blockly_compressed.js">
  </script>
  <script src="../libraries//javascript_compressed.js">
  </script>
  <script src="../libraries//blocks_compressed.js">
  </script>
  <script src="../libraries/msg/ru.js">
  </script>
  <link rel="stylesheet" href="../game.css">
  <script src="puzzle.js"></script>
  <style>
    html,
    body {
      height: 100%;
      margin: 0;
    }

    body {
      background-color: #fff;
      font-family: sans-serif;
      overflow: hidden;
    }

    /* table {
              height: 100%;
              width: 100%;
            } */
    /* #blocklyArea {
              height: 99%;
            } */
    
  </style>
</header>

<body>
  <div style="padding:10px;" class="description">
    <div style="">
    <button id="validateButton">Тексеру</button>
    </div>
    <div style="flex-grow: 1">
      <h1>Жануарлардың суретін, неше аяғы бар екенін, және де сипаттамасын беріңіздер.</h1>
    </div>
    <div >
    <button  id="back-button" onclick="window.history.back()">
      Артқа
    </button>
  </div>
  </div>

  <div id="blocklyDiv" style="height: 100vh; width: 100vw;"></div>


  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
    <block type="ara" x="79" y="50">
      <field name="NAME">Ара</field>
    </block>
    <block type="utka" x="300" y="10">
    </block>
    <block type="picara" x="800" y="200">
    </block>
    <block type="zhalo" x="350" y="200">
    </block>
    <block type="pickoshka" x="450" y="100">
    </block>
    <block type="picutka" x="300" y="400">
    </block>
    <block type="koshka" x="100" y="450">
    </block>
    <block type="fur" x="600" y="400">
    </block>
    <block type="beak" x="550" y="350">
    </block>
  </xml>
</body>

<script>
  var blocklyDiv = document.getElementById('blocklyDiv');
  var demoWorkspace = Blockly.inject(blocklyDiv,
    {
      media: '../../media/',
      scrollbars: true,
      sounds: false,
      //  toolbox: document.getElementById('toolbox')
    });
  Blockly.Xml.appendDomToWorkspace(document.getElementById('toolbox'),
    demoWorkspace);
  function validate() {
    var blocks = demoWorkspace.getAllBlocks();
    var errors = 0;
    var badBlocks = [];
    for (var b = 0, block; block = blocks[b]; b++) {
      if (block.isCorrect && !block.isCorrect()) {
        errors++;
        // Bring the offending blocks to the front.
        block.select();
        console.log(block);
        badBlocks.push(block);
      }
    }
    if (errors<1) 
      alert(`Жарайсын бәрі дұрыс!`);
    else 
      alert(`Дурыс емес саны ` + errors + '!');
  }
  document.getElementById("validateButton").addEventListener("click", function () {
    validate();
  });

</script>

</html>